<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SVG Necromancer - AI-powered SVG tool. Generate, Fix, Animate, and Convert vectors using Gemini AI.">
  <!-- CSP: 'unsafe-inline' required for SVG <style> animations -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self';
                 style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                 font-src https://fonts.gstatic.com;
                 img-src 'self' data: blob:;
                 connect-src https://generativelanguage.googleapis.com;">
  <title>SVG Necromancer | „Éô„ÇØ„Çø„Éº„ÇíËòá„Çâ„Åõ„Çã</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <div class="container">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="header-left">
        <h1 class="logo">Necromancer</h1>
        <span class="tagline-jp" lang="ja" aria-label="Resurrect your vectors">„Éô„ÇØ„Çø„Éº„ÇíËòá„Çâ„Åõ„Çã</span>
      </div>
      <button id="apiKeyBtn" class="key-btn empty" aria-label="Add API Key">
        üîë Add API Key
      </button>
    </header>

    <!-- API Key Modal -->
    <div id="keyModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
      <div class="modal">
        <button class="modal-close" aria-label="Close dialog">&times;</button>
        <h3 id="modal-title">Gemini API Key</h3>
        <p id="modal-desc">Get your free key from <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener">Google AI Studio</a></p>
        <label for="apiKeyInput" class="visually-hidden">API Key</label>
        <input type="password" id="apiKeyInput" class="form-input" placeholder="AIza..." autocomplete="off">
        <div class="modal-buttons">
          <button id="saveKeyBtn" class="btn btn-primary">Save Key</button>
          <button id="clearKeyBtn" class="btn btn-secondary">Clear</button>
          <button id="cancelKeyBtn" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Tab Navigation -->
    <nav class="tabs" role="tablist" aria-label="SVG tools">
      <button class="tab" role="tab" id="tab-generate" aria-selected="true" aria-controls="panel-generate" data-tab="generate">
        <span class="tab-icon" aria-hidden="true">‚ú®</span>
        <span class="tab-label">Generate</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">Âè¨Âñö</span>
      </button>
      <button class="tab" role="tab" id="tab-view" aria-selected="false" aria-controls="panel-view" data-tab="view" tabindex="-1">
        <span class="tab-icon" aria-hidden="true">üëÅ</span>
        <span class="tab-label">View/Edit</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">Ë°®Á§∫</span>
      </button>
      <button class="tab" role="tab" id="tab-fix" aria-selected="false" aria-controls="panel-fix" data-tab="fix" tabindex="-1">
        <span class="tab-icon" aria-hidden="true">ü©π</span>
        <span class="tab-label">Fix</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">‰øÆÂæ©</span>
      </button>
      <button class="tab" role="tab" id="tab-animate" aria-selected="false" aria-controls="panel-animate" data-tab="animate" tabindex="-1">
        <span class="tab-icon" aria-hidden="true">üé¨</span>
        <span class="tab-label">Animate</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">Âãï‰Ωú</span>
      </button>
      <button class="tab" role="tab" id="tab-convert" aria-selected="false" aria-controls="panel-convert" data-tab="convert" tabindex="-1">
        <span class="tab-icon" aria-hidden="true">‚ö°</span>
        <span class="tab-label">Convert</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">Â§âÊèõ</span>
      </button>
      <button class="tab" role="tab" id="tab-image" aria-selected="false" aria-controls="panel-image" data-tab="image" tabindex="-1">
        <span class="tab-icon" aria-hidden="true">üñºÔ∏è</span>
        <span class="tab-label">Image</span>
        <span class="tab-jp" lang="ja" aria-hidden="true">ÁîªÂÉè</span>
      </button>
    </nav>

    <!-- Status Bar -->
    <div id="statusBar" class="status-bar" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Main Content -->
    <main id="main-content" class="main">
      <!-- Left Panel -->
      <div class="left-panel">
        <!-- Generate Panel -->
        <div id="panel-generate" class="tab-panel active" role="tabpanel" aria-labelledby="tab-generate">
          <label for="promptInput" class="form-label">Describe your SVG</label>
          <textarea id="promptInput" class="form-textarea" placeholder="A minimalist mountain logo with sun rays..." aria-describedby="prompt-help"></textarea>
          <span id="prompt-help" class="visually-hidden">Describe the SVG you want to generate. Be specific about colors, shapes, and style.</span>

          <div class="form-row">
            <div class="form-group">
              <label for="styleSelect" class="form-label">Style</label>
              <select id="styleSelect" class="form-select">
                <option value="modern">Modern</option>
                <option value="dark">Dark/Mystical</option>
                <option value="playful">Playful</option>
                <option value="corporate">Corporate</option>
                <option value="minimal">Minimal</option>
                <option value="vintage">Vintage</option>
                <option value="neon">Neon</option>
              </select>
            </div>
            <div class="form-group">
              <label for="textOverlay" class="form-label">Include Text (optional)</label>
              <input type="text" id="textOverlay" class="form-input" placeholder="e.g., LOGO, BRAND">
            </div>
          </div>

          <button id="generateBtn" class="btn btn-primary">Âè¨Âñö Generate</button>
        </div>

        <!-- View Panel -->
        <div id="panel-view" class="tab-panel" role="tabpanel" aria-labelledby="tab-view">
          <p class="help-text">Paste or edit your SVG code below. Preview updates live.</p>
        </div>

        <!-- Fix Panel -->
        <div id="panel-fix" class="tab-panel" role="tabpanel" aria-labelledby="tab-fix">
          <p class="help-text">Paste your broken SVG below, then click Fix to resurrect it.</p>
          <button id="fixBtn" class="btn btn-primary">ü©π ‰øÆÂæ© Fix SVG</button>
        </div>

        <!-- Animate Panel -->
        <div id="panel-animate" class="tab-panel" role="tabpanel" aria-labelledby="tab-animate">
          <label for="animationType" class="form-label">Animation Type</label>
          <select id="animationType" class="form-select">
            <option value="">Select animation...</option>
            <option value="pulse">Pulse / Breathe</option>
            <option value="spin">Spin / Rotate</option>
            <option value="bounce">Bounce</option>
            <option value="fade">Fade In/Out</option>
            <option value="draw">Draw / Reveal</option>
            <option value="float">Float / Hover</option>
            <option value="shake">Shake / Wiggle</option>
            <option value="glow">Glow</option>
          </select>
          <button id="animateBtn" class="btn btn-primary">üé¨ Apply Animation</button>
        </div>

        <!-- Convert Panel -->
        <div id="panel-convert" class="tab-panel" role="tabpanel" aria-labelledby="tab-convert">
          <label for="convertFormat" class="form-label">Convert To</label>
          <select id="convertFormat" class="form-select">
            <option value="react">React Component</option>
            <option value="vue">Vue Component</option>
            <option value="base64">Base64 Data URI</option>
            <option value="datauri">URL Encoded Data URI</option>
            <option value="optimized">Optimized/Minified</option>
          </select>
          <button id="convertBtn" class="btn btn-primary">‚ö° Â§âÊèõ Convert</button>
          <div id="convertedOutput" class="converted-output">
            <div class="converted-header">
              <span>Output</span>
              <button id="copyConvertedBtn" class="btn-small">Copy</button>
            </div>
            <pre id="convertedCode" class="converted-code"></pre>
          </div>
        </div>

        <!-- Image Panel -->
        <div id="panel-image" class="tab-panel" role="tabpanel" aria-labelledby="tab-image">
          <label for="imagePrompt" class="form-label">Describe the image</label>
          <textarea id="imagePrompt" class="form-textarea" rows="3" placeholder="A minimalist tech logo with circuit patterns..."></textarea>

          <div class="form-row">
            <div class="form-group">
              <label for="imageStyle" class="form-label">Style</label>
              <select id="imageStyle" class="form-select">
                <option value="modern">Modern</option>
                <option value="corporate">Corporate</option>
                <option value="playful">Playful</option>
                <option value="minimal">Minimal</option>
                <option value="tech">Tech/Futuristic</option>
                <option value="vintage">Vintage</option>
              </select>
            </div>
            <div class="form-group">
              <label for="imageModel" class="form-label">Quality</label>
              <select id="imageModel" class="form-select">
                <option value="gemini">Gemini Flash (Free)</option>
                <option value="imagen4Fast">Imagen Fast ($0.02)</option>
                <option value="imagen4">Imagen Standard ($0.04)</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="imageText" class="form-label">Include Text (optional)</label>
            <input type="text" id="imageText" class="form-input" placeholder="e.g., BRAND, LOGO">
          </div>

          <button id="imageGenBtn" class="btn btn-primary">üñºÔ∏è ÁîüÊàê Generate Image</button>
        </div>

        <!-- Code Editor -->
        <div class="editor-section">
          <div class="editor-header">
            <span class="editor-title">SVG Code</span>
            <div class="editor-actions">
              <button id="copyCodeBtn" class="btn-small">Copy</button>
              <button id="clearCodeBtn" class="btn-small">Clear</button>
            </div>
          </div>
          <label for="svgEditor" class="visually-hidden">SVG Code Editor</label>
          <textarea id="svgEditor" class="code-editor" placeholder="<svg>...</svg>" spellcheck="false" aria-label="SVG code editor"></textarea>
        </div>
      </div>

      <!-- Right Panel -->
      <div class="right-panel">
        <div class="preview-header">
          <span>Preview</span>
          <span class="preview-jp" lang="ja">„Éó„É¨„Éì„É•„Éº</span>
        </div>
        <div id="previewArea" class="preview-area" aria-label="SVG Preview">
          <div class="preview-placeholder">
            <div class="empty-state-icon">‚ú®</div>
            <div class="empty-state-title">No SVG Yet</div>
            <div class="empty-state-desc">Generate or paste SVG code to see it come to life</div>
          </div>
        </div>
        <!-- Image Preview (hidden by default) -->
        <div id="imagePreview" class="preview-area image-preview" style="display: none;" aria-label="Generated Image">
          <img id="generatedImage" src="" alt="Generated image">
        </div>
        <div class="export-buttons">
          <button id="downloadSvgBtn" class="btn btn-export">Download SVG</button>
          <button id="downloadPngBtn" class="btn btn-export">Download PNG</button>
          <button id="downloadImageBtn" class="btn btn-export" disabled>Download Image</button>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <div class="footer-brand">
        <span class="footer-badge" lang="ja">ËòáÁîü</span>
        <span>Resurrected by</span>
        <a href="https://undeadlist.com" target="_blank" rel="noopener" class="footer-link">UndeadList</a>
      </div>
      <div class="footer-tagline">The indie software flea market</div>
    </footer>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
